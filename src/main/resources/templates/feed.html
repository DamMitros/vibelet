<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout(~{::content})}">
    <head><title>Vibe Let</title></head>
    <body>
    <div th:fragment="content">

        <div class="neo-box p-6 mb-8 relative bg-white transform -rotate-1">
            <div class="absolute -top-3 -left-3 bg-acid-green border-[3px] border-black px-2 py-1 font-mono text-xs font-bold shadow-neo-sm">
                NEW_TRANSMISSION
            </div>

            <form th:action="@{/vibes}" method="post" enctype="multipart/form-data">
                <textarea name="content" class="w-full bg-off-awhite border-[3px] border-black p-4 font-mono text-lg focus:outline-none focus:bg-white focus:shadow-neo-sm transition resize-none h-32 placeholder:text-gray-400" placeholder="WRITE SOMETHING LOUD..."></textarea>

                <div class="flex justify-between items-end mt-4">
                    <div class="flex gap-2 items-center">
                        <label class="w-10 h-10 border-[3px] border-black bg-acid-pink hover:bg-white hover:shadow-neo-sm transition flex items-center justify-center cursor-pointer">
                            <i class="fa-solid fa-image"></i>
                            <input type="file" name="file" class="hidden">
                        </label>
                        <select name="privacy" class="h-10 border-[3px] border-black bg-white px-2 font-mono text-xs font-bold cursor-pointer hover:bg-gray-100">
                            <option value="PUBLIC">PUBLIC</option>
                            <option value="FRIENDS_ONLY">FRIENDS</option>
                            <option value="PRIVATE">PRIVATE</option>
                        </select>
                    </div>
                    <button type="submit" class="neo-btn bg-black text-white hover:bg-acid-yellow hover:text-black font-head p-2 border-2 border-black shadow-[4px_4px_0px_0px_#000]">
                        SEND IT <i class="fa-solid fa-paper-plane ml-2"></i>
                    </button>
                </div>
            </form>
        </div>

        <div class="space-y-12">
            <article class="neo-box p-0 bg-white rotate-random relative" th:each="vibe : ${vibes}">
                <div class="border-b-[3px] border-black p-4 flex justify-between items-center bg-off-white">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 border-[3px] border-black bg-acid-yellow overflow-hidden">
                            <div class="w-full h-full bg-acid-blue"></div>
                        </div>
                        <div>
                            <h3 class="font-head text-lg leading-none" th:text="${vibe.user.username}">USERNAME</h3>
                            <p class="font-mono text-xs bg-black text-white inline-block px-1 mt-1" th:text="${#temporals.format(vibe.createdAt, 'HH:mm dd-MM')}">DATE</p>
                            <span class="font-mono text-[10px] border border-black px-1 ml-2" th:text="${vibe.privacyStatus}">PUBLIC</span>
                        </div>
                    </div>
                </div>

                <div class="p-4">
                    <p class="font-body font-bold text-xl mb-4 leading-tight" th:text="${vibe.content}">
                        Content goes here...
                    </p>
                </div>

                <div class="border-y-[3px] border-black relative group" th:if="${vibe.imageUrl}">
                    <img th:src="@{'/uploads/' + ${vibe.imageUrl}}" class="w-full object-cover filter contrast-125 grayscale group-hover:grayscale-0 transition duration-300" alt="Post Img">
                </div>

                <div class="p-4 flex gap-4 font-mono text-sm font-bold">
                    <button class="flex-1 py-3 border-[3px] border-black flex items-center justify-center gap-2 hover:bg-acid-pink hover:shadow-neo-sm transition active:translate-y-1 active:shadow-none bg-white">
                        <i class="fa-solid fa-heart"></i> <span th:text="${vibe.likes.size()}">0</span> LIKES
                    </button>
                    <button class="flex-1 py-3 border-[3px] border-black flex items-center justify-center gap-2 hover:bg-acid-blue hover:shadow-neo-sm transition active:translate-y-1 active:shadow-none bg-white">
                        <i class="fa-solid fa-comment"></i> <span th:text="${vibe.comments.size()}">0</span> COMMENTS
                    </button>
                </div>
            </article>

            <div th:if="${vibes.empty}" class="neo-box p-10 text-center bg-acid-yellow rotate-1">
                <h2 class="font-head text-3xl mb-2">DEAD SILENCE</h2>
                <p class="font-mono">No vibes here yet. Be the first one to scream into the void.</p>
            </div>
        </div>

    </div>
    </body>
</html>